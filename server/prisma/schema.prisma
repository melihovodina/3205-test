datasource db {
  provider = "postgres"
  url      = "postgresql://serv:database_pass@database:5432/url_short?schema=public"
}

generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

model Url {
  id          Int      @id @default(autoincrement())
  originalUrl String   @db.VarChar(2083)
  shortUrl    String   @unique @db.VarChar(25)
  expiresAt   DateTime? 
  alias       String?  @db.VarChar(20)
  createdAt   DateTime @default(now())
  clickCount  Int      @default(0)
  clicks      Click[]
}

model Click {
  id        Int      @id @default(autoincrement())
  urlId     Int
  clickedAt DateTime @default(now())
  ipAddress String   @db.VarChar(45)

  url       Url    @relation(fields: [urlId], references: [id])
}